{% extends "base.html" %}
{% block title %}MUS-HUB | Register{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='register.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="container">
  <div class="register-container">
    <div class="circle circle-one"></div>
    <div class="circle circle-two"></div>

    <div class="form-container">
      <h1>Create Your MUS-HUB Account</h1>
      <p class="opacity">Join our creative community. Fill in the form below to get started.</p>

      <form action="{{ url_for('register') }}" method="post">
        <input type="text" name="username" placeholder="Username" required>
        <input type="email" name="email" placeholder="Email Address" required>

        <select name="user_type" required>
          <option value="" disabled selected>Select user type</option>
          <option value="musician">Musician</option>
          <option value="artist">Artist</option>
          <option value="producer">Producer</option>
          <option value="listener">Fan</option>
        </select>

        <div class="password-row">
          <input type="password" name="password" placeholder="Password" id="password" required>
          <button type="button" id="togglePassword" aria-label="Show or hide password">Show</button>
        </div>

        <div class="password-row">
          <input type="password" name="confirm_password" placeholder="Confirm Password" id="confirmPassword" required>
          <button type="button" id="toggleConfirmPassword" aria-label="Show or hide confirm password">Show</button>
        </div>

        <button type="submit">Register</button>
      </form>

      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <ul class="flashes">
            {% for message in messages %}
              <li>{{ message }}</li>
            {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}
    </div>
  </div>
</div>

<script>
  const togglePassword = document.getElementById('togglePassword');
  const passwordInput = document.getElementById('password');
  togglePassword.addEventListener('click', () => {
    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordInput.setAttribute('type', type);
    togglePassword.textContent = type === 'password' ? 'Show' : 'Hide';
  });

  const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
  const confirmPasswordInput = document.getElementById('confirmPassword');
  toggleConfirmPassword.addEventListener('click', () => {
    const type = confirmPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    confirmPasswordInput.setAttribute('type', type);
    toggleConfirmPassword.textContent = type === 'password' ? 'Show' : 'Hide';
  });
</script>
{% endblock %}





